# =============================================================================
# Home Assistant MCP Server Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Home Assistant Connection (Required)
# -----------------------------------------------------------------------------

# Your Home Assistant URL (must include http:// or https://)
HA_URL=http://127.0.0.1:8123

# Long-lived access token from Home Assistant
# Get from: Profile -> Long-Lived Access Tokens
HA_TOKEN=your_long_lived_access_token_here

# Validate SSL certificates (set to false for self-signed certs or HTTP)
# Default: true
HA_STRICT_SSL=false

# Request timeout in milliseconds
# Default: 30000 (30 seconds)
HA_TIMEOUT=30000

# -----------------------------------------------------------------------------
# AI Provider Configuration (Optional)
# -----------------------------------------------------------------------------

# Provider type: ollama, openai (for OpenAI-compatible APIs), or none (disabled)
AI_PROVIDER=none

# Provider URL
AI_URL=http://127.0.0.1:11434

# Model name
AI_MODEL=qwen3:14b

# Request timeout in milliseconds
AI_TIMEOUT=60000

# API key (optional, for authenticated providers)
# AI_API_KEY=your_api_key_here

# -----------------------------------------------------------------------------
# MCP Server Configuration
# -----------------------------------------------------------------------------

# Log level: debug, info, warn, error
# Default: info
MCP_SERVER_LOG_LEVEL=info

# Log format: plain, json, gcp-json
# - plain: Human-readable format
# - json: Structured JSON logs
# - gcp-json: Google Cloud Platform compatible JSON
# Default: plain
MCP_SERVER_LOG_FORMAT=plain

# Enable HTTP server mode (set to true for web/API access)
# When false, uses stdio mode for Claude Desktop
# Default: false
MCP_SERVER_USE_HTTP=false

# Enable stateful sessions (only for HTTP mode)
# When true, maintains session state across requests
# Default: false
MCP_SERVER_STATEFUL=false

# -----------------------------------------------------------------------------
# HTTP Server Configuration (only when MCP_SERVER_USE_HTTP=true)
# -----------------------------------------------------------------------------

# Port to listen on
# Default: 3000
MCP_HTTP_PORT=3000

# Transport protocol: stream or sse
# - stream: Modern MCP protocol (recommended)
# - sse: Legacy MCP protocol with Server-Sent Events
# Default: stream
MCP_HTTP_TRANSPORT=stream

# Bind address (use 0.0.0.0 to listen on all interfaces)
# Default: 127.0.0.1 (localhost only)
MCP_HTTP_BIND_ADDR=127.0.0.1

# MCP endpoint path
# Default: /mcp for stream, /sse for SSE
MCP_HTTP_PATH=/mcp

# Enable health check endpoint
# Default: true
MCP_HTTP_ENABLE_HEALTHCHECK=true

# Health check endpoint path
# Default: /health
MCP_HTTP_HEALTHCHECK_PATH=/health

# Enable CORS (Cross-Origin Resource Sharing)
# Default: true
MCP_HTTP_ALLOW_CORS=true

# Allowed origins (comma-separated)
# Use * for all origins (development only!)
# Default: 127.0.0.1,localhost
MCP_HTTP_ALLOWED_ORIGINS=127.0.0.1,localhost,http://localhost:3000

# =============================================================================
# Usage Examples
# =============================================================================

# Example 1: Claude Desktop (Stdio Mode)
# ----------------------------------------
# MCP_SERVER_USE_HTTP=false
# MCP_SERVER_LOG_LEVEL=info
# Then configure claude_desktop_config.json to run: node dist/index.js

# Example 2: HTTP Server with Stream Transport (Recommended)
# -----------------------------------------------------------
# MCP_SERVER_USE_HTTP=true
# MCP_HTTP_TRANSPORT=stream
# MCP_HTTP_PORT=3000
# MCP_HTTP_BIND_ADDR=127.0.0.1
# Access at: http://127.0.0.1:3000/mcp

# Example 3: HTTP Server with SSE (Legacy Clients)
# -------------------------------------------------
# MCP_SERVER_USE_HTTP=true
# MCP_HTTP_TRANSPORT=sse
# MCP_HTTP_PORT=3000
# Access at: http://127.0.0.1:3000/sse

# Example 4: Production HTTP Server
# ----------------------------------
# MCP_SERVER_USE_HTTP=true
# MCP_SERVER_LOG_FORMAT=json
# MCP_HTTP_TRANSPORT=stream
# MCP_HTTP_PORT=3000
# MCP_HTTP_BIND_ADDR=0.0.0.0
# MCP_HTTP_ALLOWED_ORIGINS=https://your-app.com
# MCP_SERVER_STATEFUL=true

# =============================================================================
# Security Notes
# =============================================================================
# - Never commit this file with real credentials
# - Use HA_STRICT_SSL=true in production with HTTPS
# - Restrict MCP_HTTP_ALLOWED_ORIGINS to trusted domains
# - Use MCP_HTTP_BIND_ADDR=127.0.0.1 for local-only access
# - Rotate your Home Assistant tokens periodically
